(this["webpackJsonpwebrtc-611463022"]=this["webpackJsonpwebrtc-611463022"]||[]).push([[0],{180:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=180},187:function(e,t,n){},190:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),r=n(16),s=n.n(r),i=(n(88),n(11)),o=n(82),l=n(10),d=(n(74),n(38)),u=(n(177),{apiKey:"AIzaSyBewF_17IyC2YcrjR2ubNFLH1ouv_GrrvU",authDomain:"webrtc-67382.firebaseapp.com",projectId:"webrtc-67382",storageBucket:"webrtc-67382.appspot.com",messagingSenderId:"198607742827",appId:"1:198607742827:web:2e3f3bd9212d7af54ace2e",measurementId:"G-DZEZSHZCNN"});d.a.apps.length||d.a.initializeApp(u);var b=d.a,j=n(2),m=function(e){var t=e.toggleSign,n=e.setID,a=Object(c.useState)(""),r=Object(i.a)(a,2),s=r[0],d=r[1],u=Object(c.useState)(""),m=Object(i.a)(u,2),f=m[0],h=m[1],g=Object(c.useState)([]),p=Object(i.a)(g,2),O=p[0],x=p[1];Object(c.useEffect)((function(){var e=b.firestore().collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())}));x(t)}));return function(){return e}}),[x]);return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(l.d,{style:{maxWidth:"400px",margin:"auto"},className:"mt-5",children:[Object(j.jsx)(l.g,{className:"h4",children:"Sign In"}),Object(j.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==s&&""!==f&&f.length>=6){var t=!1;O.forEach((function(e){s===e.email&&f===e.password&&(n(e.id),localStorage.setItem("id",e.id),localStorage.setItem("fname",e.firstname),localStorage.setItem("lname",e.lastname),localStorage.setItem("email",e.email),t=!0)})),!1===t&&alert("email or password invalid")}},children:[Object(j.jsx)(l.e,{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"form-floating mb-3",children:[Object(j.jsx)("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",value:s,onChange:function(e){return d(e.target.value)},required:!0,autoFocus:!0}),Object(j.jsx)("label",{htmlFor:"floatingInput",children:"Email address"})]}),Object(j.jsxs)("div",{className:"form-floating",children:[Object(j.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",value:f,onChange:function(e){return h(e.target.value)},required:!0}),Object(j.jsx)("label",{htmlFor:"floatingPassword",children:"Password"})]}),Object(j.jsx)("p",{className:"mt-3 mb-0",style:{padding:"0",cursor:"pointer"},onClick:t,children:"Create Account?"})]})}),Object(j.jsx)(l.f,{className:"text-right",children:Object(j.jsx)(l.b,{type:"submit",children:"Login"})})]})]})})},f=function(e){var t=e.toggleSign,n=Object(c.useState)(""),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(""),d=Object(i.a)(o,2),u=d[0],m=d[1],f=Object(c.useState)(""),h=Object(i.a)(f,2),g=h[0],p=h[1],O=Object(c.useState)(""),x=Object(i.a)(O,2),v=x[0],y=x[1],w=Object(c.useState)(""),N=Object(i.a)(w,2),S=N[0],C=N[1],F=function(){y(""),C(""),s(""),m(""),p("")};return Object(j.jsx)("div",{className:"App",children:Object(j.jsxs)(l.d,{style:{maxWidth:"480px",margin:"auto"},className:"mt-5",children:[Object(j.jsx)(l.g,{className:"h4",children:"Sign Up"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u&&(u.length>=6?u===g?(!function(){var e=b.firestore(),t=(new Date).toISOString().slice(0,10);e.collection("users").add({firstname:"".concat(v),lastname:"".concat(S),email:"".concat(r),password:"".concat(u),created:"".concat(t)}).then((function(e){alert("Please, Login Again")})).catch((function(e){console.error("Error adding document: ",e)}))}(),t(),F()):alert("Password is not math"):alert("Password larger than 6 charater"))},children:[Object(j.jsx)(l.e,{children:Object(j.jsxs)("div",{children:[Object(j.jsxs)("div",{className:"form-floating mb-3",children:[Object(j.jsx)("input",{type:"text",className:"form-control",id:"fname",placeholder:"John",value:v,onChange:function(e){return y(e.target.value)},required:!0,autoFocus:!0}),Object(j.jsx)("label",{htmlFor:"fname",children:"First Name"})]}),Object(j.jsxs)("div",{className:"form-floating mb-3",children:[Object(j.jsx)("input",{type:"text",className:"form-control",id:"lname",placeholder:"name@example.com",value:S,onChange:function(e){return C(e.target.value)},required:!0}),Object(j.jsx)("label",{htmlFor:"lname",children:"Last Name"})]}),Object(j.jsxs)("div",{className:"form-floating mb-3",children:[Object(j.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"name@example.com",value:r,onChange:function(e){return s(e.target.value)},required:!0}),Object(j.jsx)("label",{htmlFor:"floatingInput",children:"Email address"})]}),Object(j.jsxs)("div",{className:"form-floating mb-3",children:[Object(j.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",value:u,onChange:function(e){return m(e.target.value)},required:!0}),Object(j.jsx)("label",{htmlFor:"floatingPassword",children:"Password"})]}),Object(j.jsxs)("div",{className:"form-floating mb-3",children:[Object(j.jsx)("input",{type:"password",className:"form-control",id:"ComfirnPassword",placeholder:"Password",value:g,onChange:function(e){return p(e.target.value)},required:!0}),Object(j.jsx)("label",{htmlFor:"ComfirnPassword",children:"Comfirn Password"})]}),Object(j.jsx)("p",{className:"mt-3 mb-0",style:{padding:"0",cursor:"pointer"},onClick:t,children:"Already Account?"})]})}),Object(j.jsx)(l.f,{className:"text-right",children:Object(j.jsx)(l.b,{type:"submit",children:"Save"})})]})]})})},h=n(39),g=n(78),p=n.n(g);function O(e){var t=e.messages;return Object(j.jsx)(l.j,{children:t&&t.map((function(e,t){return Object(j.jsx)(l.h,{md:"12",className:e.owner?"text-right":"text-left",children:Object(j.jsxs)(l.b,{outline:!0,pill:!0,theme:e.owner?"primary":"secondary",className:"mb-1",children:[" ",e.message," "]})},t)}))})}function x(e){var t=e.txtMessage,n=e.setTxtMessage,c=e.sendMessage;return Object(j.jsxs)("div",{className:"input-group mb-3 mt-3",children:[Object(j.jsx)("input",{type:"text",className:"form-control",placeholder:"Message","aria-describedby":"button-addon2",value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&c()}}),Object(j.jsx)("button",{className:"btn btn-primary",type:"button",id:"button-addon2",onClick:function(){return c()},disabled:!t,children:"Send"})]})}function v(e){var t=e.files,n=e.setFiles,c=e.sendFile;return Object(j.jsx)("div",{children:Object(j.jsxs)("div",{className:"input-group mb-3 mt-3",children:[Object(j.jsx)("input",{type:"file",className:"form-control",placeholder:"Message","aria-describedby":"button-addon2",onChange:function(e){return n(e.target.files)}}),Object(j.jsx)("button",{className:"btn btn-primary",type:"button",id:"button-addon2",disabled:!t,onClick:c,children:"Send"})]})})}var y=n(79),w=n.n(y);function N(e){var t=e.fileList;return Object(j.jsx)("div",{children:t&&t.map((function(e,t){return Object(j.jsx)("ul",{className:"list-group",children:Object(j.jsxs)("li",{class:"list-group-item d-flex justify-content-between align-items-center",children:[Object(j.jsx)("a",{href:e.url,download:e.name,children:e.name}),Object(j.jsx)("span",{className:"badge bg-primary rounded-pill",children:w()(e.size)})]})},t)}))})}var S=n(193),C=n(80),F=n.n(C),I=(n(187),new p.a(localStorage.getItem("id"))),k=I.connect(),P=function(e){var t=e.logout,n=Object(c.useState)(window.innerWidth),a=Object(i.a)(n,2),r=a[0],s=a[1],o=Object(c.useState)(window.innerHeight),d=Object(i.a)(o,2),u=d[0],b=d[1],m=Object(c.useState)(""),f=Object(i.a)(m,2),g=f[0],p=f[1],y=F()(),w=Object(i.a)(y,3),C=(w[0],w[1]),P=w[2],L=Object(c.useState)(),D=Object(i.a)(L,2),E=D[0],M=D[1],z=Object(c.useState)([]),A=Object(i.a)(z,2),T=A[0],B=A[1],R=Object(c.useState)(!0),q=Object(i.a)(R,2),U=q[0],H=q[1],W=Object(c.useState)(),_=Object(i.a)(W,2),J=_[0],Y=_[1],Z=Object(c.useState)([]),G=Object(i.a)(Z,2),K=G[0],V=G[1],X=Object(c.useState)(!1),Q=Object(i.a)(X,2),$=Q[0],ee=Q[1],te=Object(c.useState)(!1),ne=Object(i.a)(te,2),ce=ne[0],ae=ne[1],re=Object(c.useState)(!0),se=Object(i.a)(re,2),ie=se[0],oe=se[1],le=Object(c.useRef)(),de=Object(c.useRef)(),ue=function(){s(window.innerWidth),b(window.innerHeight)};localStorage.getItem("reload")||(localStorage.setItem("reload",!0),window.location.reload(!1)),Object(c.useEffect)((function(){return window.addEventListener("resize",ue),function(){return window.removeEventListener("resize",ue)}}),[]),Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){C(e),le.current&&(le.current.srcObject=e)})),I.on("connection",(function(e){k=e,e.on("data",(function(e){he(),"id"===e.type&&(p(e.id),k.send({type:"id",id:localStorage.getItem("id")})),"message"===e.type&&be(e),"file"===e.type&&je(e)}))})),I.on("call",(function(e){e.answer(P.current),e.on("stream",(function(e){de.current.srcObject=e}))}))}),[]);var be=function(e){B((function(t){return[].concat(Object(h.a)(t),[{message:e.message,owner:!1}])}))},je=function(e){var t=new Blob([e.file],{type:e.filetype}),n=URL.createObjectURL(t);me({name:e.filename,url:n,size:e.size})},me=function(e){var t={name:e.name,url:e.url,size:e.size};V((function(e){return[].concat(Object(h.a)(e),[t])}))},fe=function(){H(!U)},he=function(){return oe(!1)};return Object(j.jsxs)("div",{className:"container-fluid",children:[Object(j.jsxs)(l.j,{children:[Object(j.jsxs)(l.h,{style:{padding:"0"},children:[Object(j.jsx)("video",{playsInline:!0,ref:de,autoPlay:!0,style:{width:"".concat(r-450,"px"),height:"".concat(u-100,"px"),background:"#2F4F4F"}}),Object(j.jsx)("video",{playsInline:!0,muted:!0,ref:le,autoPlay:!0,style:{maxWidth:"".concat(300,"px"),position:"relative",bottom:"".concat(u-100,"px"),right:"-".concat(r-760,"px"),marginBottom:"-200px",borderRadius:".625rem",boxShadow:"0 0.46875rem 2.1875rem rgb(90 97 105 / 10%), 0 0.9375rem 1.40625rem rgb(90 97 105 / 10%), 0 0.25rem 0.53125rem rgb(90 97 105 / 12%), 0 0.125rem 0.1875rem rgb(90 97 105 / 10%)"}}),Object(j.jsxs)("div",{style:{padding:"0",marginTop:"-10px"},className:"d-flex justify-content-center",children:[Object(j.jsx)("div",{className:"mr-3",children:Object(j.jsx)(l.b,{"data-bs-toggle":"tooltip","data-bs-placement":"left",title:$?"turn on mic":"turn off mic",style:{padding:"6px 0px",width:"60px",height:"60px",borderRadius:"30px",backgroundColor:"#FFF",borderColor:"#cccccc"},onClick:function(){return function(){ee(!$);var e=!P.current.getAudioTracks()[0].enabled;P.current.getAudioTracks()[0].enabled=e}()},children:Object(j.jsx)("h4",{className:"mb-0",children:Object(j.jsx)("i",{style:{cursor:"pointer"},className:$?"bi bi-mic-mute":"bi bi-mic"})})})}),Object(j.jsx)("div",{className:"mr-3",children:Object(j.jsx)(l.b,{"data-bs-toggle":"tooltip","data-bs-placement":"left",title:"Hang up",style:{padding:"6px 0px",width:"60px",height:"60px",borderRadius:"30px",backgroundColor:"#FFF",borderColor:"#cccccc"},onClick:function(){return window.location.reload(!1)},children:Object(j.jsx)("h4",{className:"mb-0",children:Object(j.jsx)("i",{style:{cursor:"pointer",color:"red"},className:"bi bi-telephone-x"})})})}),Object(j.jsx)("div",{className:"mr-3",children:Object(j.jsx)(l.b,{"data-bs-toggle":"tooltip","data-bs-placement":"left",title:ce?"turn on camera":"turn off camera",style:{padding:"6px 0px",width:"60px",height:"60px",borderRadius:"30px",backgroundColor:"#FFF",borderColor:"#cccccc"},onClick:function(){return function(){ae(!ce);var e=!P.current.getVideoTracks()[0].enabled;P.current.getVideoTracks()[0].enabled=e}()},children:Object(j.jsx)("h4",{className:"mb-0",children:Object(j.jsx)("i",{style:{cursor:"pointer"},className:ce?"bi bi-camera-video-off":"bi bi-camera-video"})})})})]})]}),Object(j.jsxs)(l.h,{style:{borderLeft:"1px solid #2F4F4F",height:"".concat(u,"px")},children:[Object(j.jsxs)(l.c,{className:"mb-2 mt-2",style:{width:"100%"},children:[Object(j.jsx)(l.b,{outline:!0,disabled:!!U,onClick:function(){return fe()},children:"Chat"}),Object(j.jsx)(l.b,{outline:!0,disabled:!U,onClick:function(){return fe()},children:"File"}),Object(j.jsx)(l.b,{outline:!0,theme:"danger",onClick:function(){return t()},children:"Logout"})]}),Object(j.jsx)("div",{className:"mt-3 mb-3",style:{height:"".concat(u-150,"px"),overflowY:"auto",overflowX:"hidden"},children:U?Object(j.jsx)(O,{messages:T}):Object(j.jsx)(N,{fileList:K})}),U?Object(j.jsx)(x,{txtMessage:E,setTxtMessage:M,sendMessage:function(){E&&(k.send({type:"message",message:E}),B((function(e){return[].concat(Object(h.a)(e),[{message:E,owner:!0}])})),M(""))}}):Object(j.jsx)(v,{files:J,setFiles:Y,sendFile:function(){var e=J[0];try{if(e.size>=5242880){var t=new Blob(J,{type:e.type});k.send({type:"file",file:t,filename:e.name,filetype:e.type,size:e.size})}else alert("The file is less than 5 MB.");Y("")}catch(n){alert(n),Y("")}}})]})]}),Object(j.jsxs)(S.a,{show:ie,backdrop:"static",keyboard:!1,id:"start",children:[Object(j.jsxs)(S.a.Body,{children:[Object(j.jsxs)("h4",{className:"mb-4",children:[Object(j.jsx)(l.a,{className:"mr-2",children:"MyID"}),localStorage.getItem("id")]}),Object(j.jsx)(l.i,{placeholder:"Enter Your Friend ID",value:g,onChange:function(e){return p(e.target.value)}})]}),Object(j.jsx)(S.a.Footer,{children:Object(j.jsxs)(l.c,{children:[Object(j.jsx)(l.b,{theme:"success",onClick:function(){g.length>10&&((k=I.connect(g)).on("open",(function(){k.send({type:"id",id:localStorage.getItem("id")}),he()})),k.on("data",(function(e){"id"===e.type&&p(e.id),"message"===e.type&&be(e),"file"===e.type&&je(e)})),I.call(g,P.current).on("stream",(function(e){de.current.srcObject=e})))},children:"Connect"}),Object(j.jsx)(l.b,{theme:"danger",onClick:function(){return t()},children:"Logout"})]})})]})]})},L=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],r=Object(c.useState)(""),s=Object(i.a)(r,2),o=(s[0],s[1]),l=function(){a(!n)};return Object(j.jsx)("div",{className:"App",children:localStorage.getItem("id")?Object(j.jsx)(P,{logout:function(){localStorage.clear(),window.location.reload(!1)}}):n?Object(j.jsx)(f,{toggleSign:l,setID:o}):Object(j.jsx)(m,{toggleSign:l,setID:o})})},D=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,194)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,r=t.getLCP,s=t.getTTFB;n(e),c(e),a(e),r(e),s(e)}))};n(188),n(189);s.a.render(Object(j.jsx)(a.a.StrictMode,{children:Object(j.jsx)(L,{})}),document.getElementById("root")),D()},88:function(e,t,n){}},[[190,1,2]]]);
//# sourceMappingURL=main.c56c2617.chunk.js.map