(this["webpackJsonpwebrtc-611463022"]=this["webpackJsonpwebrtc-611463022"]||[]).push([[0],{179:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=179},182:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(16),r=n.n(s),i=(n(87),n(11)),o=n(81),l=n(10),d=(n(74),n(38)),u=(n(176),{apiKey:"AIzaSyBewF_17IyC2YcrjR2ubNFLH1ouv_GrrvU",authDomain:"webrtc-67382.firebaseapp.com",projectId:"webrtc-67382",storageBucket:"webrtc-67382.appspot.com",messagingSenderId:"198607742827",appId:"1:198607742827:web:2e3f3bd9212d7af54ace2e",measurementId:"G-DZEZSHZCNN"});d.a.apps.length||d.a.initializeApp(u);var j=d.a,b=n(2),m=function(e){var t=e.toggleSign,n=e.setID,a=Object(c.useState)(""),s=Object(i.a)(a,2),r=s[0],d=s[1],u=Object(c.useState)(""),m=Object(i.a)(u,2),f=m[0],h=m[1],O=Object(c.useState)([]),g=Object(i.a)(O,2),p=g[0],x=g[1];Object(c.useEffect)((function(){var e=j.firestore().collection("users").onSnapshot((function(e){var t=e.docs.map((function(e){return Object(o.a)({id:e.id},e.data())}));x(t)}));return function(){return e}}),[x]);return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(l.d,{style:{maxWidth:"400px",margin:"auto"},className:"mt-5",children:[Object(b.jsx)(l.g,{className:"h4",children:"Sign In"}),Object(b.jsxs)("form",{onSubmit:function(e){if(e.preventDefault(),""!==r&&""!==f&&f.length>=6){var t=!1;p.forEach((function(e){r===e.email&&f===e.password&&(n(e.id),localStorage.setItem("id",e.id),localStorage.setItem("fname",e.firstname),localStorage.setItem("lname",e.lastname),localStorage.setItem("email",e.email),t=!0)})),!1===t&&alert("email or password invalid")}},children:[Object(b.jsx)(l.e,{children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"form-floating mb-3",children:[Object(b.jsx)("input",{type:"email",className:"form-control",id:"floatingInput",placeholder:"name@example.com",value:r,onChange:function(e){return d(e.target.value)},required:!0,autoFocus:!0}),Object(b.jsx)("label",{htmlFor:"floatingInput",children:"Email address"})]}),Object(b.jsxs)("div",{className:"form-floating",children:[Object(b.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",value:f,onChange:function(e){return h(e.target.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"floatingPassword",children:"Password"})]}),Object(b.jsx)("p",{className:"mt-3 mb-0",style:{padding:"0",cursor:"pointer"},onClick:t,children:"Create Account?"})]})}),Object(b.jsx)(l.f,{className:"text-right",children:Object(b.jsx)(l.b,{type:"submit",children:"Login"})})]})]})})},f=function(e){var t=e.toggleSign,n=Object(c.useState)(""),a=Object(i.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)(""),d=Object(i.a)(o,2),u=d[0],m=d[1],f=Object(c.useState)(""),h=Object(i.a)(f,2),O=h[0],g=h[1],p=Object(c.useState)(""),x=Object(i.a)(p,2),v=x[0],y=x[1],w=Object(c.useState)(""),S=Object(i.a)(w,2),N=S[0],C=S[1],I=function(){y(""),C(""),r(""),m(""),g("")};return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)(l.d,{style:{maxWidth:"480px",margin:"auto"},className:"mt-5",children:[Object(b.jsx)(l.g,{className:"h4",children:"Sign Up"}),Object(b.jsxs)("form",{onSubmit:function(e){e.preventDefault(),u&&(u.length>=6?u===O?(!function(){var e=j.firestore(),t=(new Date).toISOString().slice(0,10);e.collection("users").add({firstname:"".concat(v),lastname:"".concat(N),email:"".concat(s),password:"".concat(u),created:"".concat(t)}).then((function(e){alert("Please, Login Again")})).catch((function(e){console.error("Error adding document: ",e)}))}(),t(),I()):alert("Password is not math"):alert("Password larger than 6 charater"))},children:[Object(b.jsx)(l.e,{children:Object(b.jsxs)("div",{children:[Object(b.jsxs)("div",{className:"form-floating mb-3",children:[Object(b.jsx)("input",{type:"text",className:"form-control",id:"fname",placeholder:"John",value:v,onChange:function(e){return y(e.target.value)},required:!0,autoFocus:!0}),Object(b.jsx)("label",{htmlFor:"fname",children:"First Name"})]}),Object(b.jsxs)("div",{className:"form-floating mb-3",children:[Object(b.jsx)("input",{type:"text",className:"form-control",id:"lname",placeholder:"name@example.com",value:N,onChange:function(e){return C(e.target.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"lname",children:"Last Name"})]}),Object(b.jsxs)("div",{className:"form-floating mb-3",children:[Object(b.jsx)("input",{type:"text",className:"form-control",id:"floatingInput",placeholder:"name@example.com",value:s,onChange:function(e){return r(e.target.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"floatingInput",children:"Email address"})]}),Object(b.jsxs)("div",{className:"form-floating mb-3",children:[Object(b.jsx)("input",{type:"password",className:"form-control",id:"floatingPassword",placeholder:"Password",value:u,onChange:function(e){return m(e.target.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"floatingPassword",children:"Password"})]}),Object(b.jsxs)("div",{className:"form-floating mb-3",children:[Object(b.jsx)("input",{type:"password",className:"form-control",id:"ComfirnPassword",placeholder:"Password",value:O,onChange:function(e){return g(e.target.value)},required:!0}),Object(b.jsx)("label",{htmlFor:"ComfirnPassword",children:"Comfirn Password"})]}),Object(b.jsx)("p",{className:"mt-3 mb-0",style:{padding:"0",cursor:"pointer"},onClick:t,children:"Already Account?"})]})}),Object(b.jsx)(l.f,{className:"text-right",children:Object(b.jsx)(l.b,{type:"submit",children:"Save"})})]})]})})},h=n(39),O=n(78),g=n.n(O);function p(e){var t=e.messages;return Object(b.jsx)(l.j,{children:t&&t.map((function(e,t){return Object(b.jsx)(l.h,{md:"12",className:e.owner?"text-right":"text-left",children:Object(b.jsxs)(l.b,{outline:!0,pill:!0,theme:e.owner?"primary":"secondary",className:"mb-1",children:[" ",e.message," "]})},t)}))})}function x(e){var t=e.txtMessage,n=e.setTxtMessage,c=e.sendMessage;return Object(b.jsxs)("div",{className:"input-group mb-3 mt-3",children:[Object(b.jsx)("input",{type:"text",className:"form-control",placeholder:"Message","aria-describedby":"button-addon2",value:t,onChange:function(e){return n(e.target.value)},onKeyDown:function(e){"Enter"===e.key&&c()}}),Object(b.jsx)("button",{className:"btn btn-primary",type:"button",id:"button-addon2",onClick:function(){return c()},disabled:!t,children:"Send"})]})}function v(e){var t=e.files,n=e.setFiles,c=e.sendFile;return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"input-group mb-3 mt-3",children:[Object(b.jsx)("input",{type:"file",className:"form-control",placeholder:"Message","aria-describedby":"button-addon2",onChange:function(e){return n(e.target.files)}}),Object(b.jsx)("button",{className:"btn btn-primary",type:"button",id:"button-addon2",disabled:!t,onClick:c,children:"Send"})]})})}var y=n(79),w=n.n(y);function S(e){var t=e.fileList;return Object(b.jsx)("div",{children:t&&t.map((function(e,t){return Object(b.jsx)("ul",{className:"list-group",children:Object(b.jsxs)("li",{class:"list-group-item d-flex justify-content-between align-items-center",children:[Object(b.jsx)("a",{href:e.url,download:e.name,children:e.name}),Object(b.jsx)("span",{className:"badge bg-primary rounded-pill",children:w()(e.size)})]})},t)}))})}var N=n(185),C=new g.a(localStorage.getItem("id")),I=C.connect(),F=function(e){var t=e.logout,n=Object(c.useState)(window.innerWidth),a=Object(i.a)(n,2),s=a[0],r=a[1],o=Object(c.useState)(window.innerHeight),d=Object(i.a)(o,2),u=d[0],j=d[1],m=Object(c.useState)(""),f=Object(i.a)(m,2),O=f[0],g=f[1],y=Object(c.useState)(!1),w=Object(i.a)(y,2),F=(w[0],w[1]),k=Object(c.useState)(),P=Object(i.a)(k,2),D=P[0],L=P[1],E=Object(c.useState)(),M=Object(i.a)(E,2),z=M[0],A=M[1],B=Object(c.useState)([]),U=Object(i.a)(B,2),q=U[0],R=U[1],T=Object(c.useState)(!0),W=Object(i.a)(T,2),H=W[0],_=W[1],J=Object(c.useState)(),Y=Object(i.a)(J,2),Z=Y[0],G=Y[1],K=Object(c.useState)([]),X=Object(i.a)(K,2),Q=X[0],V=X[1],$=Object(c.useState)(!1),ee=Object(i.a)($,2),te=ee[0],ne=ee[1],ce=Object(c.useState)(!1),ae=Object(i.a)(ce,2),se=ae[0],re=ae[1],ie=Object(c.useState)(!0),oe=Object(i.a)(ie,2),le=oe[0],de=oe[1],ue=Object(c.useRef)(),je=Object(c.useRef)(),be=function(){r(window.innerWidth),j(window.innerHeight)};localStorage.getItem("reload")||(localStorage.setItem("reload",!0),window.location.reload(!1)),Object(c.useEffect)((function(){return window.addEventListener("resize",be),function(){return window.removeEventListener("resize",be)}}),[]),Object(c.useEffect)((function(){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(e){L(e),ue.current&&(ue.current.srcObject=e)})),C.on("connection",(function(e){I=e,e.on("data",(function(e){F(!0),ge(),"id"===e.type&&(g(e.id),I.send({type:"id",id:localStorage.getItem("id")})),"message"===e.type&&me(e),"file"===e.type&&fe(e)}))})),C.on("call",(function(e){navigator.mediaDevices.getUserMedia({video:!0,audio:!0}).then((function(t){e.answer(t),e.on("stream",(function(e){je.current.srcObject=e}))})).catch((function(e){console.error("Failed to get local stream",e)}))}))}),[]);var me=function(e){R((function(t){return[].concat(Object(h.a)(t),[{message:e.message,owner:!1}])}))},fe=function(e){var t=new Blob([e.file],{type:e.filetype}),n=URL.createObjectURL(t);he({name:e.filename,url:n,size:e.size})},he=function(e){var t={name:e.name,url:e.url,size:e.size};V((function(e){return[].concat(Object(h.a)(e),[t])}))},Oe=function(){_(!H)},ge=function(){return de(!1)};return Object(b.jsxs)("div",{className:"container-fluid",children:[Object(b.jsxs)(l.j,{children:[Object(b.jsxs)(l.h,{style:{padding:"0"},children:[Object(b.jsx)("video",{playsInline:!0,muted:!!se,ref:je,autoPlay:!0,style:{width:"".concat(s-450,"px"),height:"".concat(u-100,"px"),background:"#2F4F4F"}}),Object(b.jsx)("video",{playsInline:!0,muted:!0,ref:ue,autoPlay:!0,style:{maxWidth:"".concat(300,"px"),position:"relative",bottom:"".concat(u-100,"px"),right:"-".concat(s-760,"px"),marginBottom:"-200px",borderRadius:".625rem",boxShadow:"0 0.46875rem 2.1875rem rgb(90 97 105 / 10%), 0 0.9375rem 1.40625rem rgb(90 97 105 / 10%), 0 0.25rem 0.53125rem rgb(90 97 105 / 12%), 0 0.125rem 0.1875rem rgb(90 97 105 / 10%)"}}),Object(b.jsxs)("div",{style:{padding:"0"},className:"d-flex justify-content-center",children:[Object(b.jsx)("div",{className:"mr-5",children:Object(b.jsx)("h3",{className:"mb-0",children:Object(b.jsx)("i",{style:{cursor:"pointer",color:"green"},className:te?"bi bi-mic-mute-fill":"bi bi-mic",onClick:function(){ne(!te)}})})}),Object(b.jsx)("div",{children:Object(b.jsx)("h3",{className:"mb-0 ml-2",children:Object(b.jsx)("i",{style:{cursor:"pointer",color:"green"},className:se?"bi bi-volume-mute-fill":"bi bi-volume-up-fill",onClick:function(){re(!se)}})})})]})]}),Object(b.jsxs)(l.h,{style:{borderLeft:"1px solid #2F4F4F",height:"".concat(u,"px")},children:[Object(b.jsxs)(l.c,{className:"mb-2 mt-2",style:{width:"100%"},children:[Object(b.jsx)(l.b,{outline:!0,disabled:!!H,onClick:function(){return Oe()},children:"Chat"}),Object(b.jsx)(l.b,{outline:!0,disabled:!H,onClick:function(){return Oe()},children:"File"}),Object(b.jsx)(l.b,{outline:!0,theme:"danger",onClick:function(){return t()},children:"Logout"})]}),Object(b.jsx)("div",{className:"mt-3 mb-3",style:{height:"".concat(u-150,"px"),overflowY:"auto",overflowX:"hidden"},children:H?Object(b.jsx)(p,{messages:q}):Object(b.jsx)(S,{fileList:Q})}),H?Object(b.jsx)(x,{txtMessage:z,setTxtMessage:A,sendMessage:function(){z&&(I.send({type:"message",message:z}),R((function(e){return[].concat(Object(h.a)(e),[{message:z,owner:!0}])})),A(""))}}):Object(b.jsx)(v,{files:Z,setFiles:G,sendFile:function(){var e=Z[0];try{if(e.size>=5242880){var t=new Blob(Z,{type:e.type});I.send({type:"file",file:t,filename:e.name,filetype:e.type,size:e.size})}else alert("The file is less than 5 MB.");G("")}catch(n){alert(n),G("")}}})]})]}),Object(b.jsxs)(N.a,{show:le,backdrop:"static",keyboard:!1,id:"start",children:[Object(b.jsxs)(N.a.Body,{children:[Object(b.jsxs)("h4",{className:"mb-4",children:[Object(b.jsx)(l.a,{className:"mr-2",children:"MyID"}),localStorage.getItem("id")]}),Object(b.jsx)(l.i,{placeholder:"Enter Your Friend ID",value:O,onChange:function(e){return g(e.target.value)}})]}),Object(b.jsx)(N.a.Footer,{children:Object(b.jsxs)(l.c,{children:[Object(b.jsx)(l.b,{theme:"success",onClick:function(){O.length>10&&((I=C.connect(O)).on("open",(function(){I.send({type:"id",id:localStorage.getItem("id")}),F(!0),ge()})),I.on("data",(function(e){"id"===e.type&&g(e.id),"message"===e.type&&me(e),"file"===e.type&&fe(e)})),C.call(O,D).on("stream",(function(e){je.current.srcObject=e})))},children:"Connect"}),Object(b.jsx)(l.b,{theme:"danger",onClick:function(){return t()},children:"Logout"})]})})]})]})},k=function(){var e=Object(c.useState)(!1),t=Object(i.a)(e,2),n=t[0],a=t[1],s=Object(c.useState)(""),r=Object(i.a)(s,2),o=(r[0],r[1]),l=function(){a(!n)};return Object(b.jsx)("div",{className:"App",children:localStorage.getItem("id")?Object(b.jsx)(F,{logout:function(){localStorage.clear(),window.location.reload(!1)}}):n?Object(b.jsx)(f,{toggleSign:l,setID:o}):Object(b.jsx)(m,{toggleSign:l,setID:o})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,186)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),s(e),r(e)}))};n(180),n(181);r.a.render(Object(b.jsx)(a.a.StrictMode,{children:Object(b.jsx)(k,{})}),document.getElementById("root")),P()},87:function(e,t,n){}},[[182,1,2]]]);
//# sourceMappingURL=main.35d42a1d.chunk.js.map